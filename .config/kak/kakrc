require-module plug

evaluate-commands %sh{
    kcr init kakoune
}

plug plug https://github.com/alexherbo2/plug.kak %{
    define-command plug-upgrade -docstring 'plug-upgrade' %{
        plug-install
    }
}
plug-core %{
    set-option global makecmd 'make -j 8'
}

plug foot repos/foot.kak
hook -group windowing-detection global ClientCreate '.*' %{
  evaluate-commands %sh{
    [ "$WAYLAND_DISPLAY" ] && {
      echo alias global terminal foot-terminal
      echo alias global popup foot-terminal-popup
    }
  }
}
plug terminal-mode https://github.com/alexherbo2/terminal-mode.kak
hook global ModuleLoaded kitty %{
    alias global terminal kitty-terminal
    alias global popup kitty-terminal
}
plug auto-pairs https://github.com/alexherbo2/auto-pairs.kak %{
    auto-pairs-enable
}
plug explore https://github.com/alexherbo2/explore.kak %{
    explore-enable
}
plug manual-indent https://github.com/alexherbo2/manual-indent.kak %{
    manual-indent-enable
}
plug objectify https://github.com/alexherbo2/objectify.kak
plug text-objects https://github.com/alexherbo2/text-objects.kak
plug jq https://github.com/alexherbo2/jq.kak
plug surround https://github.com/alexherbo2/surround.kak
plug toggle-highlighter https://github.com/alexherbo2/toggle-highlighter.kak
plug palette https://github.com/alexherbo2/palette.kak
plug change-directory https://github.com/alexherbo2/change-directory.kak
plug sleuth https://github.com/alexherbo2/sleuth.kak %{
    sleuth-enable
}
plug move-line https://github.com/alexherbo2/move-line.kak %{
    map -docstring 'Move selected lines below' global normal <down> ': move-line-below<ret>'
    map -docstring 'Move selected lines above' global normal <up> ': move-line-above<ret>'
}

plug-old kakboard https://github.com/lePerdu/kakboard %{
    hook global WinCreate .* %{ kakboard-enable }
}
plug-old sudo-write https://github.com/occivink/kakoune-sudo-write
plug-old vertical-selection https://github.com/occivink/kakoune-vertical-selection
plug-old buffers https://github.com/Delapouite/kakoune-buffers
plug-old state-save https://gitlab.com/Screwtapello/kakoune-state-save %{
  hook global KakBegin .* %{
    state-save-reg-load colon
    state-save-reg-load pipe
    state-save-reg-load slash
  }
  hook global KakEnd .* %{
    state-save-reg-save colon
    state-save-reg-save pipe
    state-save-reg-save slash
  }
}

source "~/.config/kak/ui.kak"
source "~/.config/kak/editing.kak"
source "~/.config/kak/mappings.kak"
source "~/.config/kak/asterisk.kak"
source "~/.config/kak/files.kak"
