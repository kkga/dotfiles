require-module plug

plug plug https://github.com/alexherbo2/plug.kak %{
  define-command plug-upgrade -docstring 'plug-upgrade' %{
    plug-install
  }
}
plug-core %{ set-option global makecmd 'make -j 8' }

# plug gdscript projects/gdscript.kak
plug foot projects/foot.kak
hook -group windowing-detection global ClientCreate '.*' %{
  evaluate-commands %sh{
    [ "$WAYLAND_DISPLAY" ] && {
      echo alias global terminal foot-terminal
      echo alias global popup foot-terminal-popup
    }
  }
}
hook global ModuleLoaded kitty %{
  alias global terminal kitty-terminal
  alias global popup kitty-terminal
}
plug auto-pairs https://github.com/alexherbo2/auto-pairs.kak %{ auto-pairs-enable }
plug explore https://github.com/alexherbo2/explore.kak %{
  explore-enable
  define-command explore-files -params .. '+ kcr-fzf-files %arg{@}'
  define-command explore-buffers -params .. '+ kcr-fzf-buffers %arg{@}'
}
plug edit https://github.com/alexherbo2/edit.kak
plug manual-indent https://github.com/alexherbo2/manual-indent.kak
plug objectify https://github.com/alexherbo2/objectify.kak
plug text-objects https://github.com/alexherbo2/text-objects.kak
plug surround https://github.com/alexherbo2/surround.kak
plug toggle-highlighter https://github.com/alexherbo2/toggle-highlighter.kak
plug palette https://github.com/alexherbo2/palette.kak
plug change-directory https://github.com/alexherbo2/change-directory.kak
plug sleuth https://github.com/alexherbo2/sleuth.kak %{ sleuth-enable }
plug move-line https://github.com/alexherbo2/move-line.kak
plug word-select https://github.com/alexherbo2/word-select.kak
plug terminal-mode https://github.com/alexherbo2/terminal-mode.kak

plug-old shellcheck https://gitlab.com/Screwtapello/kakoune-shellcheck
plug-old sudo-write https://github.com/occivink/kakoune-sudo-write
plug-old vertical-selection https://github.com/occivink/kakoune-vertical-selection
plug-old buffers https://github.com/Delapouite/kakoune-buffers
plug-old state-save https://gitlab.com/Screwtapello/kakoune-state-save %{
  hook global KakBegin .* %{
    state-save-reg-load colon
    state-save-reg-load pipe
    state-save-reg-load slash
  }
  hook global KakEnd .* %{
    state-save-reg-save colon
    state-save-reg-save pipe
    state-save-reg-save slash
  }
}

evaluate-commands %sh{ kcr init kakoune }

source "~/.config/kak/editing.kak"
source "~/.config/kak/ui.kak"
source "~/.config/kak/mappings.kak"
